{"version":3,"sources":["redux/auth/auth-operation.js","img/icons/menu_icon.svg","img/icons/close_icon.svg","components/navbar/NavBar.js","pages/mainPage/MainPage.js","shared/reactAlert.js"],"names":["axios","defaults","baseURL","token","headers","common","Authorization","logIn","loginObject","dispatch","a","loginRequest","post","data","loginSuccess","result","alertSuccess","alertError","loginError","message","logOut","getState","logoutRequest","authToken","auth","get","logoutSuccess","logoutError","NavBar","useState","click","setClick","match","useRouteMatch","handleClick","useDispatch","className","href","target","rel","exact","to","url","activeClassName","onClick","src","svgClose","svgMenu","alt","width","height","OrderForm","lazy","OrdersOfDays","OrdersOfMonth","MainPage","fallback","AppLoader","path","component","toast","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","success"],"mappings":"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","file":"static/js/MainPage.61b5aa9e.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport {\r\n  registerRequest,\r\n  registerSuccess,\r\n  registerError,\r\n  loginRequest,\r\n  loginSuccess,\r\n  loginError,\r\n  logoutRequest,\r\n  logoutSuccess,\r\n  logoutError,\r\n  getCurrentUserRequest,\r\n  getCurrentUserSuccess,\r\n  getCurrentUserError,\r\n} from \"./auth-actions\";\r\nimport {alertError, alertSuccess} from \"../../shared/reactAlert\"\r\n\r\naxios.defaults.baseURL = \"https://teatralna.herokuapp.com\";\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = \"\";\r\n  },\r\n};\r\n\r\nconst register = (registrationObject) => async (dispatch) => {\r\n  dispatch(registerRequest());\r\n\r\n  try {\r\n    const { data } = await axios.post(\r\n      \"/api/v1/auth/signup\",\r\n      registrationObject\r\n    );\r\n    token.set(data.token);\r\n    dispatch(registerSuccess(data));\r\n  } catch (error) {\r\n    dispatch(registerError(error.message));\r\n  }\r\n};\r\n\r\nconst logIn = (loginObject) => async (dispatch) => {\r\n  dispatch(loginRequest());\r\n\r\n  try {\r\n    const { data } = await axios.post(\"/api/v1/auth/signin\", loginObject);\r\n    dispatch(loginSuccess(data.result));\r\n    alertSuccess(\"Добро пожаловать.\")\r\n  } catch (error) {\r\n    alertError(\"Неверный логин или пароль\")\r\n    dispatch(loginError(error.message));\r\n  }\r\n};\r\n\r\nconst logOut = () => async (dispatch, getState) => {\r\n  dispatch(logoutRequest());\r\n\r\n  try {\r\n    const authToken = getState().auth.token;\r\n    token.set(authToken);\r\n\r\n    const { data } = await axios.get(\"/api/v1/auth/logout\");\r\n    token.unset();\r\n\r\n    dispatch(logoutSuccess());\r\n  } catch (error) {\r\n    dispatch(logoutError(error.message));\r\n  }\r\n};\r\n\r\nconst getCurrentUser = () => async (dispatch, getState) => {\r\n  const {\r\n    auth: { token: persistedToken },\r\n  } = getState();\r\n\r\n  if (!persistedToken) {\r\n    return;\r\n  }\r\n  token.set(persistedToken);\r\n\r\n  dispatch(getCurrentUserRequest());\r\n\r\n  try {\r\n    const { data } = await axios.get(\"/api/v1/auth/current\");\r\n    dispatch(getCurrentUserSuccess(data.data));\r\n  } catch (error) {\r\n    dispatch(getCurrentUserError(error.message));\r\n  }\r\n};\r\n\r\nexport { token, register, logIn, logOut, getCurrentUser };\r\n","export default __webpack_public_path__ + \"static/media/menu_icon.560605aa.svg\";","export default __webpack_public_path__ + \"static/media/close_icon.80067b51.svg\";","import React, { useState } from \"react\";\r\nimport { NavLink, useRouteMatch } from \"react-router-dom\";\r\nimport \"./NavBar.css\";\r\nimport svgMenu from \"../../img/icons/menu_icon.svg\";\r\nimport svgClose from \"../../img/icons/close_icon.svg\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { logOut } from \"../../redux/auth/auth-operation\";\r\n\r\nfunction NavBar() {\r\n  const [click, setClick] = useState(false);\r\n  const match = useRouteMatch();\r\n\r\n  const handleClick = () => setClick(!click);\r\n  const dispatch = useDispatch();\r\n  return (\r\n    <>\r\n      <nav className=\"navbar\">\r\n        <div className=\"nav-container\">\r\n          <a\r\n            href=\"https://www.instagram.com/teatralnakondyterska/?hl=ru\"\r\n            target=\"_blank\"\r\n            className=\"nav-logo\"\r\n            rel=\"noreferrer\"\r\n          >\r\n            Teatralnaya\r\n            <i className=\"fas fa-code\"></i>\r\n          </a>\r\n\r\n          <ul className={click ? \"nav-menu active\" : \"nav-menu\"}>\r\n            <li className=\"nav-item\">\r\n              <NavLink\r\n                exact={true}\r\n                to={`${match.url}`}\r\n                activeClassName=\"active\"\r\n                className=\"nav-links\"\r\n                onClick={handleClick}\r\n              >\r\n                Создание заказа\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <NavLink\r\n                exact={true}\r\n                to={`${match.url}/ordersOfDay`}\r\n                activeClassName=\"active\"\r\n                className=\"nav-links\"\r\n                onClick={handleClick}\r\n              >\r\n                Заказы за день\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <NavLink\r\n                exact={true}\r\n                to={`${match.url}/ordersOfMonth`}\r\n                activeClassName=\"active\"\r\n                className=\"nav-links\"\r\n                onClick={handleClick}\r\n              >\r\n                Заказы за месяц\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <a\r\n                className=\"nav-links\"\r\n                onClick={() => {\r\n                  dispatch(logOut());\r\n                }}\r\n              >\r\n                Выход\r\n              </a>\r\n            </li>\r\n          </ul>\r\n          <div className=\"nav-icon\" onClick={handleClick}>\r\n            <img\r\n              src={click ? svgClose : svgMenu}\r\n              alt=\"\"\r\n              // className={click ? \"fas fa-times\" : \"fas fa-bars\"}\r\n              width=\"35\"\r\n              height=\"35\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default NavBar;\r\n","import { Suspense, lazy } from \"react\";\r\nimport { Route, Switch, useRouteMatch } from \"react-router-dom\";\r\nimport AppLoader from \"../../components/appLoader/AppLoader\";\r\n\r\nimport NavBar from \"../../components/navbar/NavBar\";\r\n\r\nconst OrderForm = lazy(() =>\r\n  import(\r\n    \"../../components/orderForm/OrderForm\" /* webpackChunkName: \"OrderForm\" */\r\n  )\r\n);\r\nconst OrdersOfDays = lazy(() =>\r\n  import(\r\n    \"../../components/ordersOfDay/OrdersOfDays\" /* webpackChunkName: \"OrdersOfDays\" */\r\n  )\r\n);\r\nconst OrdersOfMonth = lazy(() =>\r\n  import(\r\n    \"../../components/ordersOfMonth/OrdersOfMonth\" /* webpackChunkName: \"OrdersOfMonth\" */\r\n  )\r\n);\r\n\r\n\r\nconst MainPage = () => {\r\n  const match = useRouteMatch();\r\n  return (\r\n    <>\r\n    <NavBar/>\r\n      <Suspense fallback={<AppLoader/>}>\r\n        <Switch>\r\n          <Route exact  path={`${match.path}`} component={OrderForm}></Route>\r\n          <Route exact  path={`${match.path}/ordersOfDay`} component={OrdersOfDays}></Route>\r\n          <Route exact path={`${match.path}/ordersOfMonth`}  component={OrdersOfMonth}></Route>\r\n        </Switch>\r\n      </Suspense>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MainPage;\r\n","import { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nfunction alertError(message) {\r\n  return toast.error(message, {\r\n    position: \"top-right\",\r\n    autoClose: 4000,\r\n    hideProgressBar: false,\r\n    closeOnClick: true,\r\n    pauseOnHover: true,\r\n    draggable: true,\r\n    progress: undefined,\r\n  });\r\n}\r\nfunction alertSuccess(message) {\r\n  return toast.success(message, {\r\n    position: \"top-right\",\r\n    autoClose: 4000,\r\n    hideProgressBar: false,\r\n    closeOnClick: true,\r\n    pauseOnHover: true,\r\n    draggable: true,\r\n    progress: undefined,\r\n  });\r\n}\r\n\r\nexport { alertError, alertSuccess };\r\n"],"sourceRoot":""}